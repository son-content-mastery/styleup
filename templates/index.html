{% extends 'layout.html' %}

{% block title %}My Closet{% endblock %}

{% block content %}
<div class="text-center mb-5">
    <h1 class="display-4">My Digital Closet</h1>
    <p class="lead">Here are all the clothing items you've added.</p>
</div>

{% if items %}
<div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
    {% for item in items %}
    <div class="col">
        <div class="card h-100 shadow-sm">
            <img src="{{ url_for('static', filename='uploads/' + item['filename']) }}" class="card-img-top" alt="{{ item['filename'] }}" style="height: 300px; object-fit: cover;">
            <div class="card-body text-center">
                <h5 class="card-title text-capitalize">{{ item.category }}</h5>
                <p class="card-text text-muted text-capitalize">{{ item.style }}</p>
                <div class="color-palette">
                    {% if item.colors %}
                        {% for color in item.colors.split(',') %}
                            <div class="color-dot" style="background-color: {{ color }};" title="{{ color }}"></div>
                        {% endfor %}
                    {% else %}
                        <small class="text-muted">No colors extracted</small>
                    {% endif %}
                </div>
            </div>
            <div class="card-footer bg-transparent border-0 text-center pb-3">
                 <form action="{{ url_for('delete_item', item_id=item.id) }}" method="POST" onsubmit="return confirm('Are you sure you want to delete this item?');">
                    <button type="submit" class="btn btn-outline-danger btn-sm">Delete</button>
                </form>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="text-center p-5 bg-light rounded-3">
    <h2>Your closet is empty!</h2>
    <p class="lead">Why not add your first item?</p>
    <a href="{{ url_for('add_item') }}" class="btn btn-primary btn-lg mt-3">Add Clothing Item</a>
</div>
{% endif %}

{% endblock %}
